"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[682],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=i,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return a?n.createElement(h,o(o({ref:t},u),{},{components:a})):n.createElement(h,o({ref:t},u))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},7751:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=a(7462),i=(a(7294),a(3905));a(8209);const r={sidebar_position:1},o="Architecture overview",l={unversionedId:"contributing/development-guide/coding/architecture",id:"contributing/development-guide/coding/architecture",title:"Architecture overview",description:"Architecture diagrams",source:"@site/docs/contributing/development-guide/coding/architecture.md",sourceDirName:"contributing/development-guide/coding",slug:"/contributing/development-guide/coding/architecture",permalink:"/template-fastapi-react/docs/contributing/development-guide/coding/architecture",draft:!1,editUrl:"https://github.com/equinor/template-fastapi-react/tree/main/documentation/docs/contributing/development-guide/coding/architecture.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Coding",permalink:"/template-fastapi-react/docs/category/coding"},next:{title:"Extending the API",permalink:"/template-fastapi-react/docs/contributing/development-guide/coding/api/"}},s={},c=[{value:"Architecture diagrams",id:"architecture-diagrams",level:2},{value:"Level 1 - System Context diagram",id:"level-1---system-context-diagram",level:3},{value:"Level 2 - Container diagram",id:"level-2---container-diagram",level:3},{value:"Level 3 - Component diagram",id:"level-3---component-diagram",level:3},{value:"Clean architecture",id:"clean-architecture",level:2},{value:"What is Clean Architecture?",id:"what-is-clean-architecture",level:3},{value:"The Dependency Rule",id:"the-dependency-rule",level:4},{value:"Why Clean Architecture?",id:"why-clean-architecture",level:3},{value:"S.O.L.I.D Principles",id:"solid-principles",level:3},{value:"Components",id:"components",level:3},{value:"Project structure",id:"project-structure",level:2}],u={toc:c};function p(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"architecture-overview"},"Architecture overview"),(0,i.kt)("h2",{id:"architecture-diagrams"},"Architecture diagrams"),(0,i.kt)("p",null,"We are using ",(0,i.kt)("a",{parentName:"p",href:"https://c4model.com"},"c4model")," for showing architecture diagrams."),(0,i.kt)("h3",{id:"level-1---system-context-diagram"},"Level 1 - System Context diagram"),(0,i.kt)("p",null,"The Context diagram is a good starting point for diagramming and documenting a software system, allowing you to step back and see the big picture. Here we draw a diagram showing the system as a box in the centre, surrounded by its users and the other systems that it interacts with."),(0,i.kt)("h3",{id:"level-2---container-diagram"},"Level 2 - Container diagram"),(0,i.kt)("p",null,"Once you understand how your system fits in to the overall IT environment, a really useful next step is to zoom-in to the system boundary with a Container diagram. A container is something like a server-side web application, single-page application, desktop application, mobile app, database schema, file system, etc. Essentially, a container is a separately runnable/deployable unit (e.g. a separate process space) that executes code or stores data."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Container diagram",src:a(419).Z,width:"238",height:"858"})),(0,i.kt)("p",null,"The use cases and entities are the heart of our application and should have a minimal set of external library dependencies."),(0,i.kt)("h3",{id:"level-3---component-diagram"},"Level 3 - Component diagram"),(0,i.kt)("p",null,"Following on from a Container Diagram, next you can zoom in and decompose each container further to identify the major structural building blocks and their interactions."),(0,i.kt)("p",null,"The Component diagram shows how a container is made up of a number of components, what each of those components are, their responsibilities and the technology/implementation details."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Container diagram",src:a(8943).Z,width:"385",height:"1251"})),(0,i.kt)("h2",{id:"clean-architecture"},"Clean architecture"),(0,i.kt)("p",null,"We follow the ",(0,i.kt)("a",{parentName:"p",href:"https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html"},"Clean Architecture")," style and structure the codebase accordingly for our API."),(0,i.kt)("h3",{id:"what-is-clean-architecture"},"What is Clean Architecture?"),(0,i.kt)("p",null,"It is a layered approach for a ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=wtCQalq7L-E"},"more civilized age"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Clean Architecture",src:a(131).Z,width:"772",height:"567"})),(0,i.kt)("p",null,"The main point of this approach is that the business logic, also known as domain, is at the center of the universe."),(0,i.kt)("h4",{id:"the-dependency-rule"},"The Dependency Rule"),(0,i.kt)("p",null,"The most important rule is that source code dependencies can only point inwards. Nothing in an inner circle can know anything at all about something in an outer circle. In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity. "),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Talk inward with simple structures (dictionaries or classes) and talk outwards through interfaces.")),(0,i.kt)("h3",{id:"why-clean-architecture"},"Why Clean Architecture?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Loose coupling")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The code can easily be modified without affecting any or a large part of the app\u2019s codebase thus easier to scale the application later on."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Testable"),". ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"It is designed so that every part of the architecture is easy testable. Our tests can be simpler to write, faster and cheaper to maintain."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Separation of Concern")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Different modules have specific responsibilities making it easier for modification and maintenance."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Framework independent")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"This architecture is framework independent. This means it doesn\u2019t matter which database, frameworks, UI, external services you are using, the entities and the business logic of the application will always stay the same. When any of the external parts of the system become obsolete, like the database, or the web framework, you can replace those obsolete elements with a minimum of effort.")))),(0,i.kt)("h3",{id:"solid-principles"},"S.O.L.I.D Principles"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Single Responsibility")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Each software component should have only one reason to change \u2013 one responsibility."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Open-Closed")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"You should be able to extend the behavior of a component, without breaking its usage, or modifying its extensions."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Liskov Substitution"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If you have a class of one type, and any subclasses of that class, you should be able to represent the base class usage with the subclass, without breaking the app."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Interface Segregation"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"It\u2019s better to have many smaller interfaces than a large one, to prevent the class from implementing the methods that it doesn\u2019t need."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Dependency Inversion")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Components should depend on abstractions rather than concrete implementations. Also higher level modules shouldn\u2019t depend on lower level modules.")))),(0,i.kt)("h3",{id:"components"},"Components"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Entities"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Entities are the domain model that holds data (state) and logic reusable for various applications.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Entities may be shared across apps in the same enterprise."),(0,i.kt)("li",{parentName:"ul"},"Entities can be reused in applications (enterprise-wide application-independent)"))),(0,i.kt)("li",{parentName:"ul"},"An entity can be an object with methods, or it can be a set of data structures and functions. ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Should be a regular class, dataclasses, or value objects (meaning if all the properties are the same, the objects are identical). "),(0,i.kt)("li",{parentName:"ul"},"An entity does not depend on anything except possibly other entities."),(0,i.kt)("li",{parentName:"ul"},"Entities should not be affected by any change external to them, and these should be the most stable code within your application."))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Use cases")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The application Logic"),(0,i.kt)("li",{parentName:"ul"},"These are the application-specific business rules. ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Logic that defines the actual features of our app."))),(0,i.kt)("li",{parentName:"ul"},"Each use case should be limited to one feature according to Single Responsibility Principle."),(0,i.kt)("li",{parentName:"ul"},"Changes to use cases should not impact the entities."),(0,i.kt)("li",{parentName:"ul"},"Inside use cases we should have every right to expect that arguments are valid in terms of type. "),(0,i.kt)("li",{parentName:"ul"},"The only thing you can do with a use case is to execute it. "),(0,i.kt)("li",{parentName:"ul"},"Use cases interact with entities (thus depend on them) and hold logic of the specific application (and typically execute that logic via various repositories or data access layer(s) gateway(s)."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Controllers"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"You can think of them as an entry and exit gates to the use cases. It receives a request and return a response. "),(0,i.kt)("li",{parentName:"ul"},"The controller takes the user input (the request), converts it into the request object defined by the use case and passes the request objects to the use case, and at the end return the response objects."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Repositories"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Takes entities and returns entities, hides storage details. Can work against local, remote, data services or third party services.")))),(0,i.kt)("h2",{id:"project-structure"},"Project structure"),(0,i.kt)("p",null,"Here\u2019s how the project is organized. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 api/ - backend code\n\u2502\u2500\u2500 web/ - frontend code\n\u2502\u2500\u2500 documentation/ - documentation\n\u251c\u2500\u2500 docker-compose.override.yml - for running in development mode locally\n\u251c\u2500\u2500 docker-compose.yml - common docker compose settings\n\u251c\u2500\u2500 .env-template - template for environment variables\n\u2514\u2500\u2500 ...\n")))}p.isMDXComponent=!0},419:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/api-level-2-1a21bae5e1bff40a2f972f005b3226ec.svg"},8943:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/api-level-3-7b6a58c9b9c0ba643bb735a3f5e8cdc2.svg"},131:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/clean-architecture-d3af87912cd9c1dc9f68c2a233f871a1.png"},8209:(e,t,a)=>{a(7294)}}]);