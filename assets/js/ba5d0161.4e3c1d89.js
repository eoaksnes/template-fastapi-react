"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[274],{3905:(e,t,i)=>{i.d(t,{Zo:()=>s,kt:()=>d});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var u=n.createContext({}),c=function(e){var t=n.useContext(u),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},s=function(e){var t=c(e.components);return n.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},I=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,s=r(e,["components","mdxType","originalType","parentName"]),I=c(i),d=a,g=I["".concat(u,".").concat(d)]||I[d]||p[d]||l;return i?n.createElement(g,o(o({ref:t},s),{},{components:i})):n.createElement(g,o({ref:t},s))}));function d(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=i.length,o=new Array(l);o[0]=I;var r={};for(var u in t)hasOwnProperty.call(t,u)&&(r[u]=t[u]);r.originalType=e,r.mdxType="string"==typeof e?e:a,o[1]=r;for(var c=2;c<l;c++)o[c]=i[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}I.displayName="MDXCreateElement"},232:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var n=i(7462),a=(i(7294),i(3905));i(8209);const l={sidebar_position:5},o="Publishing",r={unversionedId:"contributing/development-guide/publishing",id:"contributing/development-guide/publishing",title:"Publishing",description:"Github actions",source:"@site/docs/contributing/development-guide/publishing.md",sourceDirName:"contributing/development-guide",slug:"/contributing/development-guide/publishing",permalink:"/template-fastapi-react/docs/contributing/development-guide/publishing",draft:!1,editUrl:"https://github.com/equinor/template-fastapi-react/tree/main/documentation/docs/contributing/development-guide/publishing.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Upgrading",permalink:"/template-fastapi-react/docs/contributing/development-guide/upgrading"},next:{title:"Writing documentation",permalink:"/template-fastapi-react/docs/contributing/documentation"}},u={},c=[{value:"Github actions",id:"github-actions",level:2},{value:"Reusable workflows",id:"reusable-workflows",level:3},{value:"Changelogs",id:"changelogs",level:2},{value:"How to generate",id:"how-to-generate",level:3},{value:"Auto-generated",id:"auto-generated",level:4},{value:"Locally",id:"locally",level:4}],s={toc:c};function p(e){let{components:t,...l}=e;return(0,a.kt)("wrapper",(0,n.Z)({},s,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"publishing"},"Publishing"),(0,a.kt)("h2",{id:"github-actions"},"Github actions"),(0,a.kt)("p",null,"We use ",(0,a.kt)("a",{parentName:"p",href:"https://docs.github.com/en/actions"},"GitHub Actions"),", as the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/equinor/boilerplate-react-fastapi/actions"},"CI/CD pipeline"),"."),(0,a.kt)("p",null,"GitHub Actions makes it easy to automate all our software workflows. It build, test, and deploy the code right from GitHub."),(0,a.kt)("p",null,"All the heavy lifting is done by GitHub. GitHub will simply use the files defined in ",(0,a.kt)("inlineCode",{parentName:"p"},".github/workflows")," to do the setup."),(0,a.kt)("p",null,"We trigger the reusable workflow like this:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Github Actions",src:i(1078).Z,width:"443",height:"134"})),(0,a.kt)("p",null,"Since we are using trunk based development, all pushes to main trigger a release to a test environment."),(0,a.kt)("p",null,"Release to production is triggered when we merge inn the auto-generated pull requests (that contains changelog) that are created from the ",(0,a.kt)("inlineCode",{parentName:"p"},"release-please.yml")," Github action. "),(0,a.kt)("h3",{id:"reusable-workflows"},"Reusable workflows"),(0,a.kt)("p",null,"A reusable workflow is just like any GitHub Actions workflow with one key difference, it includes a ",(0,a.kt)("inlineCode",{parentName:"p"},"workflow_call")," trigger."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"release.yaml")," workflow will automatically create a pull request with an auto-generated changelog everytime code is pushed to the main branch. It will also at the same time bump version with standard-version and create a tagged release that can be used to deploy to production."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Missing: How to deploy the project on a live system."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"tests.yaml")," workflow will automatically run all types of tests.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"publish-docs.yaml")," workflow will build the documentation. Then it will deploy the documentation (placed in the site folder) to GitHub Pages."))),(0,a.kt)("h2",{id:"changelogs"},"Changelogs"),(0,a.kt)("p",null,"We auto-generate changelogs by following the ",(0,a.kt)("a",{parentName:"p",href:"https://www.conventionalcommits.org/en/v1.0.0/"},"conventional commits"),". specification"),(0,a.kt)("h3",{id:"how-to-generate"},"How to generate"),(0,a.kt)("h4",{id:"auto-generated"},"Auto-generated"),(0,a.kt)("p",null," The Github action ",(0,a.kt)("inlineCode",{parentName:"p"},"release-please.yaml")," is a workflow that will automatically create a pull request with an auto-generated changelog everytime code is pushed to the main branch."),(0,a.kt)("h4",{id:"locally"},"Locally"),(0,a.kt)("p",null,"Sometimes it is nice to generate the changelogs locally for testing."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"act -j release-please -s GITHUB_TOKEN=<GITHUB_TOKEN>\n")),(0,a.kt)("p",null,"GITHUB_TOKEN: login to GitHub and generate a personal access token (PaT) from personal settings -> developer settings -> personal access tokens."))}p.isMDXComponent=!0},1078:(e,t,i)=>{i.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIxMzRweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjQ0M3B4O2hlaWdodDoxMzRweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0NDMgMTM0IiB3aWR0aD0iNDQzcHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjQ4ODMiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iOTQiIHg9IjEwIiB5PSI0OC4yNDQxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzQiIHg9IjIwIiB5PSI3MS43NzkzIj5vbiBwdXNoIHRvPC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNDg4MyIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSIxMDMiIHg9IjE1NCIgeT0iMjAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MyIgeD0iMTY0IiB5PSI0My41MzUyIj5hbGwgYnJhbmNoZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjgiIHg9IjMxMCIgeT0iNDMuNTM1MiI+dGVzdHMueWFtbDwvdGV4dD48cGF0aCBkPSJNMjU3LDM4LjI0NDEgTDI2NywzOC4yNDQxIEMyODIsMzguMjQ0MSAyODIsMzguMjQ0MSAyOTcsMzguMjQ0MSBMMzA3LDM4LjI0NDEgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMTA0LDY2LjQ4ODMgTDExNCw2Ni40ODgzIEMxMjksNjYuNDg4MyAxMjksMzguMjQ0MSAxNDQsMzguMjQ0MSBMMTU0LDM4LjI0NDEgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjQ4ODMiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iODciIHg9IjE1NCIgeT0iNzYuNDg4MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY3IiB4PSIxNjQiIHk9IjEwMC4wMjM0Ij5vbmx5IG1haW48L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUiIHg9IjI5NCIgeT0iOTAuNzc5MyI+cmVsZWFzZS55YW1sPC90ZXh0PjxwYXRoIGQ9Ik0yNDEsOTQuNzMyNCBMMjUxLDk0LjczMjQgQzI2Niw5NC43MzI0IDI2Niw4NS40ODgzIDI4MSw4NS40ODgzIEwyOTEsODUuNDg4MyAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNyIgeD0iMjk0IiB5PSIxMDkuMjY3NiI+Z2VuZXJhdGUtZG9jcy55YW1sPC90ZXh0PjxwYXRoIGQ9Ik0yNDEsOTQuNzMyNCBMMjUxLDk0LjczMjQgQzI2Niw5NC43MzI0IDI2NiwxMDMuOTc2NiAyODEsMTAzLjk3NjYgTDI5MSwxMDMuOTc2NiAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwYXRoIGQ9Ik0xMDQsNjYuNDg4MyBMMTE0LDY2LjQ4ODMgQzEyOSw2Ni40ODgzIDEyOSw5NC43MzI0IDE0NCw5NC43MzI0IEwxNTQsOTQuNzMyNCAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwhLS1NRDU9W2UxZGRmZjlhMWMzM2YzZjNlOWIyM2IzZjE1MTBmOWYxXQpAc3RhcnRtaW5kbWFwCiogb24gcHVzaCB0bwoqKiBhbGwgYnJhbmNoZXMKKioqXyB0ZXN0cy55YW1sCioqIG9ubHkgbWFpbgoqKipfIHJlbGVhc2UueWFtbAoqKipfIGdlbmVyYXRlLWRvY3MueWFtbApAZW5kbWluZG1hcAoKUGxhbnRVTUwgdmVyc2lvbiAxLjIwMjIuNShTYXQgQXByIDMwIDEyOjU1OjUyIENFU1QgMjAyMikKKEdQTCBzb3VyY2UgZGlzdHJpYnV0aW9uKQpKYXZhIFJ1bnRpbWU6IE9wZW5KREsgUnVudGltZSBFbnZpcm9ubWVudApKVk06IE9wZW5KREsgNjQtQml0IFNlcnZlciBWTQpEZWZhdWx0IEVuY29kaW5nOiBVVEYtOApMYW5ndWFnZTogbmIKQ291bnRyeTogTk8KLS0+PC9nPjwvc3ZnPgo="},8209:(e,t,i)=>{i(7294)}}]);